@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* Board skin variants via CSS variables
   Using variables ensures inner previews override outer (global) skins correctly. */
:root {
  /* defaults (emerald-like) */
  --sq-light-bg: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.9), rgba(240,252,247,0.85) 40%, rgba(214,247,236,0.8) 100%);
  --sq-dark-bg: radial-gradient(circle at 65% 65%, rgba(6,78,59,0.95), rgba(4,120,87,0.9) 45%, rgba(2,44,34,0.85) 100%);
  --sq-light-bg-hover: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.95), rgba(236,252,247,0.9) 40%, rgba(214,247,236,0.95) 100%);
  --sq-dark-bg-hover: radial-gradient(circle at 65% 65%, rgba(6,95,70,0.95), rgba(5,150,105,0.92) 50%, rgba(2,60,45,0.9) 100%);

  /* Category color variables (base palette) */
  /* Increased saturation / contrast versions */
  --cat-literature: linear-gradient(135deg, #fff5ec 0%, #e4b180 45%, #c77935 100%);
  --cat-culture: linear-gradient(135deg, #fff0f3 0%, #ff6b88 45%, #dc1c3f 100%);
  --cat-general-knowledge: linear-gradient(135deg, #edffe5 0%, #7ddf5f 45%, #34a014 100%);
  --cat-history: linear-gradient(135deg, #fff6df 0%, #ffbe4d 45%, #d78200 100%);
  --cat-nature: linear-gradient(135deg, #e6fff2 0%, #58e5a2 45%, #119c5a 100%);
  --cat-sport: linear-gradient(135deg, #e6f5ff 0%, #4fb4ff 45%, #006bbd 100%);
  --cat-geography: linear-gradient(135deg, #e3fbff 0%, #40d5f7 45%, #0487a8 100%);
  --cat-science: linear-gradient(135deg, #f6ebff 0%, #b980ff 45%, #6a21c2 100%);
  --cat-random: linear-gradient(135deg, #f3f6fa 0%, #9daabb 45%, #4c5867 100%);

  /* Hover variants (slightly brighter / shifted) */
  --cat-literature-hover: linear-gradient(135deg, #fffaf4 0%, #efc59a 45%, #d18642 100%);
  --cat-culture-hover: linear-gradient(135deg, #fff4f6 0%, #ff7b96 45%, #e12648 100%);
  --cat-general-knowledge-hover: linear-gradient(135deg, #f2ffe9 0%, #8be86c 45%, #39ac18 100%);
  --cat-history-hover: linear-gradient(135deg, #fff9e6 0%, #ffc558 45%, #e28b06 100%);
  --cat-nature-hover: linear-gradient(135deg, #ecfff5 0%, #62f0ac 45%, #13a962 100%);
  --cat-sport-hover: linear-gradient(135deg, #edf7ff 0%, #5ac0ff 45%, #0078cd 100%);
  --cat-geography-hover: linear-gradient(135deg, #e9fcff 0%, #4ae0ff 45%, #0793b6 100%);
  --cat-science-hover: linear-gradient(135deg, #fbf1ff 0%, #c28dff 45%, #7629ce 100%);
  --cat-random-hover: linear-gradient(135deg, #f6f9fc 0%, #a8b5c7 45%, #566372 100%);
.cat-literature,.cat-culture,.cat-general-knowledge,.cat-history,.cat-nature,.cat-sport,.cat-geography,.cat-science,.cat-random {
  box-shadow: inset 0 0 0 2px rgba(0,0,0,0.55), 0 1px 2px rgba(0,0,0,0.4), 0 0 6px -1px rgba(0,0,0,0.35);
  background-blend-mode: overlay, normal;
  position: relative;
  overflow: hidden;
}
.cat-literature:hover,.cat-culture:hover,.cat-general-knowledge:hover,.cat-history:hover,.cat-nature:hover,.cat-sport:hover,.cat-geography:hover,.cat-science:hover,.cat-random:hover {
  box-shadow: inset 0 0 0 2px rgba(0,0,0,0.6), 0 2px 6px rgba(0,0,0,0.45), 0 0 10px -1px rgba(0,0,0,0.4);
}

/* Subtle one-pass shimmer on hover (pseudo-element) */
.cat-literature:before,.cat-culture:before,.cat-general-knowledge:before,.cat-history:before,.cat-nature:before,.cat-sport:before,.cat-geography:before,.cat-science:before,.cat-random:before {
  content:"";
  position:absolute; inset:0;
  background: linear-gradient(110deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.28) 45%, rgba(255,255,255,0) 70%);
  transform: translateX(-130%);
  opacity:0;
  pointer-events:none;
  mix-blend-mode: screen;
}
.cat-literature:hover:before,.cat-culture:hover:before,.cat-general-knowledge:hover:before,.cat-history:hover:before,.cat-nature:hover:before,.cat-sport:hover:before,.cat-geography:hover:before,.cat-science:hover:before,.cat-random:hover:before {
  animation: sq-shimmer 1.15s ease forwards;
  opacity:1;
}

@keyframes sq-shimmer {
  0% { transform: translateX(-130%); opacity:0; }
  15% { opacity:1; }
  55% { transform: translateX(35%); }
  75% { opacity:1; }
  100% { transform: translateX(130%); opacity:0; }
}

/* Team-specific flag color filters (applied to animated GIF). Adjust hue-rotate values as needed to match pawn tints */
.flag-team-a { filter: hue-rotate(195deg) saturate(2.2) brightness(1.05); }
.flag-team-b { filter: hue-rotate(325deg) saturate(2.2) brightness(1.05); }
.flag-team-c { filter: hue-rotate(105deg) saturate(2.0) brightness(0.95); }
.flag-team-d { filter: hue-rotate(40deg)  saturate(2.1) brightness(1.05); }

}

.skin-emerald {
  --sq-light-bg: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.9), rgba(236,252,247,0.9) 40%, rgba(214,247,236,0.95) 100%);
  --sq-dark-bg: radial-gradient(circle at 65% 65%, rgba(6,78,59,0.95), rgba(4,120,87,0.92) 50%, rgba(2,60,45,0.9) 100%);
  --sq-light-bg-hover: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.95), rgba(236,252,247,0.9) 40%, rgba(214,247,236,0.95) 100%);
  --sq-dark-bg-hover: radial-gradient(circle at 65% 65%, rgba(6,95,70,0.95), rgba(5,150,105,0.92) 50%, rgba(2,60,45,0.9) 100%);
}

.skin-nebula {
  --sq-light-bg: radial-gradient(circle at 30% 30%, rgba(219,234,254,0.95), rgba(191,219,254,0.9) 45%, rgba(147,197,253,0.85) 100%);
  --sq-dark-bg: radial-gradient(circle at 70% 70%, rgba(30,58,138,0.95), rgba(29,78,216,0.9) 45%, rgba(17,24,39,0.9) 100%);
  --sq-light-bg-hover: radial-gradient(circle at 30% 30%, rgba(239,246,255,1), rgba(191,219,254,0.95) 45%, rgba(147,197,253,0.9) 100%);
  --sq-dark-bg-hover: radial-gradient(circle at 70% 70%, rgba(30,64,175,0.98), rgba(37,99,235,0.94) 45%, rgba(17,24,39,0.92) 100%);
}

.skin-crimson {
  --sq-light-bg: radial-gradient(circle at 35% 35%, rgba(254,226,226,0.95), rgba(254,202,202,0.9) 45%, rgba(254,178,178,0.85) 100%);
  --sq-dark-bg: radial-gradient(circle at 65% 65%, rgba(153,27,27,0.95), rgba(220,38,38,0.92) 50%, rgba(69,10,10,0.9) 100%);
  --sq-light-bg-hover: radial-gradient(circle at 35% 35%, rgba(255,235,235,1), rgba(254,205,205,0.95) 45%, rgba(254,185,185,0.9) 100%);
  --sq-dark-bg-hover: radial-gradient(circle at 65% 65%, rgba(185,28,28,0.98), rgba(239,68,68,0.94) 50%, rgba(88,28,28,0.92) 100%);
}

.skin-steel {
  --sq-light-bg: radial-gradient(circle at 35% 35%, rgba(243,244,246,0.95), rgba(229,231,235,0.9) 45%, rgba(209,213,219,0.85) 100%);
  --sq-dark-bg: radial-gradient(circle at 65% 65%, rgba(31,41,55,0.95), rgba(55,65,81,0.92) 50%, rgba(17,24,39,0.9) 100%);
  --sq-light-bg-hover: radial-gradient(circle at 35% 35%, rgba(248,249,251,1), rgba(236,238,242,0.95) 45%, rgba(217,221,227,0.9) 100%);
  --sq-dark-bg-hover: radial-gradient(circle at 65% 65%, rgba(31,41,55,0.98), rgba(59,71,89,0.94) 50%, rgba(17,24,39,0.92) 100%);
}

.skin-violet {
  --sq-light-bg: radial-gradient(circle at 35% 35%, rgba(243,232,255,0.95), rgba(233,213,255,0.9) 45%, rgba(216,180,254,0.85) 100%);
  --sq-dark-bg: radial-gradient(circle at 65% 65%, rgba(88,28,135,0.95), rgba(124,58,237,0.92) 50%, rgba(49,46,129,0.9) 100%);
  --sq-light-bg-hover: radial-gradient(circle at 35% 35%, rgba(248,240,255,1), rgba(237,223,255,0.95) 45%, rgba(221,191,255,0.9) 100%);
  --sq-dark-bg-hover: radial-gradient(circle at 65% 65%, rgba(100,30,150,0.98), rgba(139,92,246,0.94) 50%, rgba(55,48,163,0.92) 100%);
}

@keyframes demote-flash {
  0% { box-shadow: 0 0 0 0 rgba(250,204,21,0.0); transform: scale(1); }
  25% { box-shadow: 0 0 12px 4px rgba(250,204,21,0.9); transform: scale(1.08); }
  60% { box-shadow: 0 0 6px 2px rgba(250,204,21,0.5); transform: scale(1.02); }
  100% { box-shadow: 0 0 0 0 rgba(250,204,21,0); transform: scale(1); }
}

@keyframes promote-glow {
  0% { box-shadow: 0 0 0 0 rgba(16,185,129,0); }
  30% { box-shadow: 0 0 14px 6px rgba(16,185,129,0.85); }
  70% { box-shadow: 0 0 10px 4px rgba(16,185,129,0.55); }
  100% { box-shadow: 0 0 0 0 rgba(16,185,129,0); }
}

.animate-demote-flash { animation: demote-flash 900ms ease-in-out; }
.animate-promote-glow { animation: promote-glow 1200ms ease-in-out; }

/* Image tinting for piece PNG/SVG (approximate team colors via filter chain) */
/* Team tints
  A: Blue / Cyan accent
  B: Green accent (adjusted to differentiate clearly from red)
  C: Black (near-monochrome)
  D: Red accent
  Filters derived via experimentation to recolor grayscale piece assets.
*/
.team-a-tint { filter: brightness(0) saturate(100%) invert(34%) sepia(94%) saturate(747%) hue-rotate(190deg) brightness(96%) contrast(97%); }
.team-b-tint { filter: brightness(0) saturate(100%) invert(32%) sepia(93%) saturate(534%) hue-rotate(86deg) brightness(92%) contrast(94%); }
.team-c-tint { filter: brightness(0) saturate(100%) invert(8%) sepia(6%) saturate(748%) hue-rotate(123deg) brightness(92%) contrast(101%); }
.team-d-tint { filter: brightness(0) saturate(100%) invert(14%) sepia(93%) saturate(7475%) hue-rotate(2deg) brightness(94%) contrast(105%); }

/* Board square styling */
/* Legacy classes retained (may remove later) */
.sq-light { background: var(--sq-light-bg); }
.sq-dark { background: var(--sq-dark-bg); }
.sq-light:hover { background: var(--sq-light-bg-hover); }
.sq-dark:hover { background: var(--sq-dark-bg-hover); }

/* Category square classes (generated in Square.tsx via categoryToClass) */
.cat-literature { background: var(--cat-literature); }
.cat-literature:hover { background: var(--cat-literature-hover); }
.cat-culture { background: var(--cat-culture); }
.cat-culture:hover { background: var(--cat-culture-hover); }
.cat-general-knowledge { background: var(--cat-general-knowledge); }
.cat-general-knowledge:hover { background: var(--cat-general-knowledge-hover); }
.cat-history { background: var(--cat-history); }
.cat-history:hover { background: var(--cat-history-hover); }
.cat-nature { background: var(--cat-nature); }
.cat-nature:hover { background: var(--cat-nature-hover); }
.cat-sport { background: var(--cat-sport); }
.cat-sport:hover { background: var(--cat-sport-hover); }
.cat-geography { background: var(--cat-geography); }
.cat-geography:hover { background: var(--cat-geography-hover); }
.cat-science { background: var(--cat-science); }
.cat-science:hover { background: var(--cat-science-hover); }
.cat-random { background: var(--cat-random); }
.cat-random:hover { background: var(--cat-random-hover); }
.sq-selected { outline: 3px solid rgba(250,204,21,0.85); outline-offset: -2px; }
.sq-droppable { box-shadow: 0 0 0 3px rgba(129,140,248,0.65) inset, 0 0 10px 2px rgba(99,102,241,0.55); }

/* Board container frame */
.board-shell { position: relative; padding: 1.1rem; border-radius: 1.25rem; background: linear-gradient(145deg, rgba(16,24,32,0.85), rgba(8,55,47,0.85)); box-shadow: 0 8px 32px -8px rgba(0,0,0,0.6), 0 0 0 1px rgba(56,189,248,0.08); backdrop-filter: blur(6px) saturate(140%); }
.board-shell:before { content:""; position:absolute; inset:0; border-radius:inherit; padding:2px; background: linear-gradient(160deg, rgba(125,211,252,0.5), rgba(34,197,94,0.5), rgba(147,51,234,0.4)); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; pointer-events:none; }
.board-frame { border: 4px solid rgba(4,120,87,0.9); border-radius: 0.9rem; box-shadow: 0 0 0 1px rgba(16,185,129,0.4), inset 0 0 12px -2px rgba(16,185,129,0.3), 0 10px 24px -6px rgba(0,0,0,0.7); background: linear-gradient(135deg, rgba(4,120,87,0.35), rgba(6,78,59,0.35)); }

/* Game background */
.game-bg { background:
  radial-gradient(circle at 20% 25%, rgba(16,185,129,0.18), transparent 60%),
  radial-gradient(circle at 80% 70%, rgba(59,130,246,0.15), transparent 65%),
  linear-gradient(120deg, #0f172a 0%, #031a17 55%, #0a1f33 100%);
  position:relative;
}
.game-bg:after { content:""; position:absolute; inset:0; pointer-events:none; background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.03) 0 2px, transparent 2px 6px); mix-blend-mode: overlay; opacity:0.35; }

/* Last move highlight outline variant */
.last-move-ring { box-shadow: 0 0 0 3px rgba(34,211,238,0.7), 0 0 10px 3px rgba(34,211,238,0.4); border-radius: 9999px; }

/* Black hole GIF white background removal: use multiply blend to ignore white, and slight contrast to emphasize core */
.blackhole-gif { mix-blend-mode: multiply; background: transparent; }
/* Fallback approach: if image still shows halo, uncomment next line to threshold whites (may darken edges) */
/* .blackhole-gif { filter: brightness(0.85) contrast(1.15); } */

/* Responsive board sizing */
:root { --sq: 42px; --board-vpad: 140px; /* adjusted vertical padding estimate */ --board-safe: 8px; }
@media (min-width: 420px) { :root { --sq: 50px; } }
@media (min-width: 520px) { :root { --sq: 54px; } }
@media (min-width: 640px) { :root { --sq: 60px; } }
@media (min-width: 768px) { :root { --sq: 64px; } }
@media (min-width: 1024px) { :root { --sq: 68px; } }
@media (min-width: 1280px) { :root { --sq: 72px; } }
@media (min-width: 1536px) { :root { --sq: 76px; } }

/* Dynamic square size limited by available viewport height to avoid bottom clipping */
:root { --sq-dynamic: min(var(--sq), calc((100vh - (var(--board-vpad) + 20px) - var(--board-safe)) / 8)); }
.board-responsive { width: calc(var(--sq-dynamic) * 8 + 2px); max-width: 100%; overflow-x: auto; }
.board-responsive .board-frame { width: calc(var(--sq-dynamic) * 8); max-width: 100%; }
.board-responsive .board-frame > div { width: var(--sq-dynamic); height: var(--sq-dynamic); }

@media (max-width: 380px) { :root { --sq: 36px; } }
@media (max-width: 340px) { :root { --sq: 32px; } }

@media (max-height: 760px) {
  :root { --sq: clamp(38px, 7vh, 56px); }
}

@media (max-height: 700px) {
  :root { --sq: clamp(36px, 6.8vh, 52px); --board-vpad: 120px; }
  .board-shell { padding: 0.9rem; }
}
@media (max-height: 640px) {
  :root { --sq: clamp(34px, 6.5vh, 48px); --board-vpad: 110px; }
  .board-shell { padding: 0.8rem; }
}
@media (max-height: 600px) {
  :root { --sq: clamp(32px, 6.2vh, 44px); --board-vpad: 100px; }
  .board-shell { padding: 0.7rem; }
}
@media (max-height: 560px) {
  :root { --sq: clamp(30px, 6vh, 42px); --board-vpad: 90px; }
  .board-shell { padding: 0.6rem; }
}
@media (max-height: 520px) {
  :root { --sq: clamp(28px, 5.8vh, 40px); --board-vpad: 80px; }
  .board-shell { padding: 0.5rem; }
}

